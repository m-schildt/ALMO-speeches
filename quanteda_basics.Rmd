---
title: "quenteda_guide"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Getting to know Quenteda

Install packages:

```{r cars}
install.packages("quanteda")
install.packages("readtext")
```

Load packages:

```{r pressure, echo=FALSE}
library("quanteda")
library("readtext")
```

## Quanteda basics

There are three major components of a text as understood by quanteda:

the corpus,
the document-feature matrix (the “dfm”), and
tokens

A corpus is an object within R that we create by loading our text data into R (explained below) and using the corpus command. It is only by turning our data into a corpus format that quanteda is able to work with and process the text we want to analyze. A corpus holds documents separately from each other and is typically unchanged as we conduct our analysis. We might think of it as the back-up copy which we “Save As” rather than transforming or cleaning.

The dfm is the analytical unit on which we will perform analysis. As implied in its name, a dfm puts the documents into a matrix format. The rows are the original texts and the columns are the features of that text (often tokens). Dfms neatly organize the documents we want to look at, and are particularly handy if we want to analyze only part of the whole set of texts within the corpus. A dfm is also viewable with the View command–useful if we want to get an initial sense of our data before doing later analysis.

Finally, tokens are typically each individual word in a text. This default can be changed to be sentences or characters instead if we want. However, in general, we will stick with the default because seeing how many times the letter “r” is in a text is less useful than the entire word, like “race.”

## Getting text

quanteda has a simple and powerful companion package for loading texts: readtext. The main function in this package, readtext(), takes a file or fileset from disk or a URL, and returns a type of data.frame that can be used directly with the corpus() constructor function, to create a quanteda corpus object.

readtext() works on:

text (.txt) files;
comma-separated-value (.csv) files;
XML formatted data;
data from the Facebook API, in JSON format;
data from the Twitter API, in JSON format; and
generic JSON data.
The corpus constructor command corpus() works directly on:

a vector of character objects, for instance that you have already loaded into the workspace using other tools;
a VCorpus corpus object from the tm package.
a data.frame containing a text column and any other document-level metadata.

We use e indicate that we want the document variables to be sourced from the “filenames”–a location readtext recognizes. Next, we assign the document variable names, in order of appearance with the docvarnames argument. We also indicate that each variable name is separated from the next with an underscore with dvsep and that the encoding is “UTF-8” with encoding. 

```{r}

jane <- readtext("Pride and Prejudice_Jane Austen_2008_English.txt",
                      docvarsfrom = "filenames",
                      docvarnames = c("title", "author", 
                                      "year uploaded", "language"),
                      dvsep = "_",
                      encoding = "UTF-8")

charles <- readtext("A Tale of Two Cities_Charles Dickens_2009_English.txt",
                      docvarsfrom = "filenames",
                      docvarnames = c("title", "author", 
                                      "year uploaded", "language"),
                      dvsep = "_",
                      encoding = "UTF-8")

frame_00 <- rbind(jane, charles) 

frame_00
```
